{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from \"react\";\nconst useNotification = (key, defaultValue = null) => {\n  _s();\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      const value = window.localStorage.getItem(key);\n      if (value) return JSON.parse(value);else {\n        ////window.localStorage.setItem(key, JSON.stringify(defaultValue));\n        return defaultValue;\n      }\n    } catch (err) {\n      return defaultValue;\n    }\n  });\n  const setValue = newValue => {\n    let notifList = [];\n    try {\n      const value = JSON.parse(window.localStorage.getItem(key));\n      if (value && value.length !== 0) {\n        const idx = value.findIndex(elmnt => elmnt.id == newValue);\n        console.log('idx', idx);\n        if (idx !== -1) {\n          console.log('id exist');\n          const newNotif = {\n            id: newValue,\n            count: value[idx].count + 1\n          };\n          notifList = value;\n          console.log('notiflist', notifList);\n          notifList.splice(idx, 1);\n          notifList.push(newNotif);\n        } else if (!idx) {\n          console.log('new notif id');\n          notifList.push({\n            id: newValue,\n            count: 1\n          });\n        }\n        window.localStorage.setItem(key, JSON.stringify(notifList));\n      } else if (!value) {\n        console.log('empty local storage');\n        notifList.push({\n          id: newValue,\n          count: 1\n        });\n        window.localStorage.setItem(key, JSON.stringify(notifList));\n      } else window.localStorage.removeItem(key);\n    } catch (err) {}\n    setStoredValue(notifList);\n  };\n  const setReadValue = friendID => {\n    let notifList = [];\n    try {\n      const value = JSON.parse(window.localStorage.getItem(key));\n      if (value && value.length !== 0) {\n        const idx = value.findIndex(elmnt => elmnt.id == friendID);\n        if (idx !== -1) {\n          notifList = value;\n          notifList.splice(idx, 1);\n        }\n        window.localStorage.setItem(key, JSON.stringify(notifList));\n      } else window.localStorage.removeItem(key);\n    } catch (error) {}\n    setStoredValue(notifList);\n  };\n  return [storedValue, setValue, setReadValue];\n};\n_s(useNotification, \"j0VUgzh1vBE7nDoYzFQ0PJBq6Bc=\");\nexport default useNotification;","map":{"version":3,"names":["useState","useNotification","key","defaultValue","_s","storedValue","setStoredValue","value","window","localStorage","getItem","JSON","parse","err","setValue","newValue","notifList","length","idx","findIndex","elmnt","id","console","log","newNotif","count","splice","push","setItem","stringify","removeItem","setReadValue","friendID","error"],"sources":["/home/saafi/Desktop/Personal/websock/front/src/core/hooks/useNotification.js"],"sourcesContent":["import { useState } from \"react\";\n\nconst useNotification = (key, defaultValue = null) => {\n\n    const [storedValue, setStoredValue] = useState(\n        () => {\n            try {\n                const value = window.localStorage.getItem(key);\n                if (value) return JSON.parse(value);\n                else {\n                    ////window.localStorage.setItem(key, JSON.stringify(defaultValue));\n                    return defaultValue;\n                }\n            } catch (err) {\n                return defaultValue;\n            }\n        }\n    );\n\n    const setValue = (newValue) => {\n        let notifList = []\n        try {\n            const value = JSON.parse(window.localStorage.getItem(key))\n\n            if (value && value.length !== 0) {\n                const idx = value.findIndex((elmnt) => elmnt.id == newValue);\n\n                console.log('idx', idx)\n\n                if (idx !== -1) {\n                    console.log('id exist')\n                    const newNotif = { id: newValue, count: value[idx].count + 1 }\n                    notifList = value\n                    console.log('notiflist', notifList)\n                    notifList.splice(idx, 1)\n                    notifList.push(newNotif)\n\n                } else if (!idx) {\n                    console.log('new notif id')\n                    notifList.push({ id: newValue, count: 1 })\n                }\n\n                window.localStorage.setItem(key, JSON.stringify(notifList));\n            } else if (!value) {\n                console.log('empty local storage')\n                notifList.push({ id: newValue, count: 1 })\n                window.localStorage.setItem(key, JSON.stringify(notifList));\n\n            } else window.localStorage.removeItem(key);\n        } catch (err) { }\n        setStoredValue(notifList);\n    };\n\n    const setReadValue = (friendID) => {\n        let notifList = []\n        try {\n            const value = JSON.parse(window.localStorage.getItem(key))\n            if (value && value.length !== 0) {\n                const idx = value.findIndex((elmnt) => elmnt.id == friendID);\n\n                if (idx !== -1) {\n                    notifList = value\n                    notifList.splice(idx, 1)\n                }\n\n                window.localStorage.setItem(key, JSON.stringify(notifList));\n            } else window.localStorage.removeItem(key);\n\n        } catch (error) {\n\n        }\n        setStoredValue(notifList);\n    }\n\n    return [storedValue, setValue, setReadValue];\n};\n\nexport default useNotification;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}