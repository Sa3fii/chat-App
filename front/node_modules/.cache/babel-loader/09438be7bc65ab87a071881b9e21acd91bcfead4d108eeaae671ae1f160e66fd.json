{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nconst useChat = friend => {\n  _s();\n  const [messages, setmessages] = useState([]);\n  const [isLoading, setisLoading] = useState(true);\n  const [error, seterror] = useState();\n  const [msgLoading, setmsgLoading] = useState(true);\n  const [msgError, setmsgError] = useState();\n  let user = 2;\n  const getMessages = async () => {\n    try {\n      setisLoading(true);\n      seterror();\n      const result = await axios.get('http://localhost:5001/message', {\n        params: {\n          user,\n          friend\n        }\n      });\n      if (result && result.length != 0) {\n        setmessages(result.data.data);\n      }\n    } catch (error) {\n      if (error.response.data.statusCode == 7004) {\n        setmessages([]);\n      } else seterror('An error has occured');\n    } finally {\n      setisLoading(false);\n    }\n  };\n  const sendMessage = async () => {\n    try {\n      setmsgLoading(true);\n      setmsgError();\n      const result = await axios.post('http://localhost:5001/message', {\n        params: {\n          user,\n          friend\n        }\n      });\n      if (result && result.length != 0) {\n        setmessages(result.data.data);\n      }\n    } catch (error) {\n      console.log(error);\n      setmsgError(\"An error has occured\");\n    }\n  };\n  const handleSend = (e, data) => {\n    console.log(e.target);\n    e.preventDefault();\n    sendMessage();\n  };\n  useEffect(() => {\n    getMessages();\n  }, [friend]);\n  return {\n    messages,\n    isLoading,\n    error,\n    handleSend\n  };\n};\n_s(useChat, \"cN/O0EDFVKGLAlPuT26B+Quu98U=\");\nexport default useChat;","map":{"version":3,"names":["axios","React","useEffect","useState","useChat","friend","_s","messages","setmessages","isLoading","setisLoading","error","seterror","msgLoading","setmsgLoading","msgError","setmsgError","user","getMessages","result","get","params","length","data","response","statusCode","sendMessage","post","console","log","handleSend","e","target","preventDefault"],"sources":["/home/saafi/Desktop/Personal/websock/front/src/pages/chat/logic/useChat.js"],"sourcesContent":["import axios from 'axios'\nimport React, { useEffect, useState } from 'react'\n\nconst useChat = (friend) => {\n\n    const [messages, setmessages] = useState([])\n    const [isLoading, setisLoading] = useState(true)\n    const [error, seterror] = useState()\n    const [msgLoading, setmsgLoading] = useState(true)\n    const [msgError, setmsgError] = useState()\n\n\n    let user = 2\n\n\n    const getMessages = async () => {\n        try {\n            setisLoading(true)\n            seterror()\n\n            const result = await axios.get('http://localhost:5001/message', { params: { user, friend } });\n            if (result && result.length != 0) {\n                setmessages(result.data.data)\n            }\n        } catch (error) {\n            if (error.response.data.statusCode == 7004) {\n                setmessages([])\n            } else seterror('An error has occured')\n        } finally {\n            setisLoading(false)\n        }\n    };\n\n    const sendMessage = async () => { \n        try {\n            setmsgLoading(true)\n            setmsgError()\n\n            const result = await axios.post('http://localhost:5001/message', { params: { user, friend } });\n            if (result && result.length != 0) {\n                setmessages(result.data.data)\n            }\n        } catch (error) {\n            console.log(error);\n            setmsgError(\"An error has occured\")\n        }\n     }\n\n    const handleSend = (e,data) => {\n        console.log(e.target)\n        e.preventDefault();\n        sendMessage();\n        \n    }\n    useEffect(() => {\n        getMessages()\n    }, [friend])\n\n    return {\n        messages,\n        isLoading,\n        error,\n        handleSend\n    }\n}\n\nexport default useChat"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAElD,MAAMC,OAAO,GAAIC,MAAM,IAAK;EAAAC,EAAA;EAExB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGL,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACM,SAAS,EAAEC,YAAY,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACQ,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAAC,CAAC;EACpC,MAAM,CAACU,UAAU,EAAEC,aAAa,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAACY,QAAQ,EAAEC,WAAW,CAAC,GAAGb,QAAQ,CAAC,CAAC;EAG1C,IAAIc,IAAI,GAAG,CAAC;EAGZ,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACAR,YAAY,CAAC,IAAI,CAAC;MAClBE,QAAQ,CAAC,CAAC;MAEV,MAAMO,MAAM,GAAG,MAAMnB,KAAK,CAACoB,GAAG,CAAC,+BAA+B,EAAE;QAAEC,MAAM,EAAE;UAAEJ,IAAI;UAAEZ;QAAO;MAAE,CAAC,CAAC;MAC7F,IAAIc,MAAM,IAAIA,MAAM,CAACG,MAAM,IAAI,CAAC,EAAE;QAC9Bd,WAAW,CAACW,MAAM,CAACI,IAAI,CAACA,IAAI,CAAC;MACjC;IACJ,CAAC,CAAC,OAAOZ,KAAK,EAAE;MACZ,IAAIA,KAAK,CAACa,QAAQ,CAACD,IAAI,CAACE,UAAU,IAAI,IAAI,EAAE;QACxCjB,WAAW,CAAC,EAAE,CAAC;MACnB,CAAC,MAAMI,QAAQ,CAAC,sBAAsB,CAAC;IAC3C,CAAC,SAAS;MACNF,YAAY,CAAC,KAAK,CAAC;IACvB;EACJ,CAAC;EAED,MAAMgB,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACAZ,aAAa,CAAC,IAAI,CAAC;MACnBE,WAAW,CAAC,CAAC;MAEb,MAAMG,MAAM,GAAG,MAAMnB,KAAK,CAAC2B,IAAI,CAAC,+BAA+B,EAAE;QAAEN,MAAM,EAAE;UAAEJ,IAAI;UAAEZ;QAAO;MAAE,CAAC,CAAC;MAC9F,IAAIc,MAAM,IAAIA,MAAM,CAACG,MAAM,IAAI,CAAC,EAAE;QAC9Bd,WAAW,CAACW,MAAM,CAACI,IAAI,CAACA,IAAI,CAAC;MACjC;IACJ,CAAC,CAAC,OAAOZ,KAAK,EAAE;MACZiB,OAAO,CAACC,GAAG,CAAClB,KAAK,CAAC;MAClBK,WAAW,CAAC,sBAAsB,CAAC;IACvC;EACH,CAAC;EAEF,MAAMc,UAAU,GAAGA,CAACC,CAAC,EAACR,IAAI,KAAK;IAC3BK,OAAO,CAACC,GAAG,CAACE,CAAC,CAACC,MAAM,CAAC;IACrBD,CAAC,CAACE,cAAc,CAAC,CAAC;IAClBP,WAAW,CAAC,CAAC;EAEjB,CAAC;EACDxB,SAAS,CAAC,MAAM;IACZgB,WAAW,CAAC,CAAC;EACjB,CAAC,EAAE,CAACb,MAAM,CAAC,CAAC;EAEZ,OAAO;IACHE,QAAQ;IACRE,SAAS;IACTE,KAAK;IACLmB;EACJ,CAAC;AACL,CAAC;AAAAxB,EAAA,CA7DKF,OAAO;AA+Db,eAAeA,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}